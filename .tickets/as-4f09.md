---
id: as-4f09
status: closed
deps: []
links: []
created: 2026-02-16T10:29:27Z
type: task
priority: 2
assignee: oracle-repo-audit
tags: [team]
---
# You are The Oracle - a deep research agent investigating repo maintenance for `/Users/alexander/Projects/totalrecall-rs`.

## Your Mission

Do a COMPREHENSIVE deep-dive audit of every file and directory in the totalrecall-rs repo root that might be clutter, stale, or deletable. The goal is to understand WHAT each thing is, WHY it exists, WHETHER anything references it, and WHETHER it's safe to remove.

## What We Already Know (survey data)

Root directory has 40 items. The following are SUSPECT and need deep investigation:

### Files to investigate:
1. `eval_results*.json` (9 files, ~4MB total) — gitignored, from Dec 2025
2. `docker-compose.yml.backup` — gitignored 
3. `test_keyring.rs` — gitignored, one-off debug script
4. `IMPLEMENTATION_PLAN.md` — TRACKED in git
5. `MIGRATION.md` — TRACKED in git
6. `config.toml` — is this local config that shouldn't be tracked?
7. `config.template.toml` — vs config.toml, what's the relationship?
8. `docker-compose.full.yml` vs `docker-compose.yml` — why two?
9. `justfile` vs `Makefile` — why two build systems?
10. `flake.nix` — is this actually used/maintained?

### Directories to investigate:
1. `backups/` (6.2 GB) — contains SQL dumps, sqlite files. Is anything in the codebase creating/reading these? Or just manual dumps?
2. `data/` — contains `locomo10.json` (2.7 MB). What uses it?
3. `viewer/` — what's its status? Is viewer-rewrite branch merged?
4. `hooks/` — what's in here?
5. `examples/` — current or stale?
6. `benches/` — current or stale? Do they compile?
7. `scripts/` — what scripts, are they referenced?
8. `docker/` — what's in here vs root Dockerfile?

### Worktrees:
1. `.worktrees/viewer-rewrite/` (3.5 GB) — branch is MERGED into main
2. `.worktrees/refactor-split-modules/` (5.6 GB) — 5 unmerged commits
3. `/Users/alexander/Projects/totalrecall-locomo-eval/` (2.3 GB) — detached HEAD on ancient commit

### Branches (check each):
Merged but not deleted: `viewer-rewrite`, `fix/skip-keyring-in-tests`, `feat/llm-judge-metrics`, `feature/llm-provider-abstraction`
Backup branches: `backup/pr-116-original-20251218-042720`, `backup/main_contam`, `backup/main_contaminated_20251217_092035`
Unmerged local: `feat/dream-rebuild-relationships`, `perf/parallelize-eval-reranking`, `feat/oauth-credential-provider`, `feature/sqlite-migration`
~20 stale remote-only branches on origin

### Tickets:
7 untracked `.tickets/` files, 3 modified

## Your Process

For EACH suspect item:
1. **Read the actual content** (first 50 lines for files, `ls -la` for dirs)
2. **Check git log** — `git log --oneline -5 -- <path>` — when added, by whom, context
3. **Check references** — `rg -l '<filename>' --glob '!target'` — is it used anywhere?
4. **Check size** — `du -sh <path>`
5. **Classify**: SAFE_DELETE / INVESTIGATE / KEEP / ARCHIVE_THEN_DELETE
6. **Provide evidence** for each classification

For branches:
1. Check if the branch's changes exist in main (cherry-picked, squash-merged, etc.)
2. Check last commit date
3. Check if there's an open PR

For worktrees:
1. Check if the branch is merged
2. Check for uncommitted changes in the worktree
3. Check target/ size within worktree

## Output

Create a comprehensive ticket with your findings using `todos_oneshot` tagged `research,oracle,maintenance`. Organize by:
1. **Immediate Safe Deletes** — with evidence
2. **Archive Then Delete** — valuable history but taking space
3. **Needs Human Decision** — with context for the decision
4. **Keep** — with justification
5. **Total disk recovery estimate**

Be THOROUGH. Read files. Check references. Don't guess by filename.

You are The Oracle - a deep research agent investigating repo maintenance for `/Users/alexander/Projects/totalrecall-rs`.

## Your Mission

Do a COMPREHENSIVE deep-dive audit of every file and directory in the totalrecall-rs repo root that might be clutter, stale, or deletable. The goal is to understand WHAT each thing is, WHY it exists, WHETHER anything references it, and WHETHER it's safe to remove.

## What We Already Know (survey data)

Root directory has 40 items. The following are SUSPECT and need deep investigation:

### Files to investigate:
1. `eval_results*.json` (9 files, ~4MB total) — gitignored, from Dec 2025
2. `docker-compose.yml.backup` — gitignored 
3. `test_keyring.rs` — gitignored, one-off debug script
4. `IMPLEMENTATION_PLAN.md` — TRACKED in git
5. `MIGRATION.md` — TRACKED in git
6. `config.toml` — is this local config that shouldn't be tracked?
7. `config.template.toml` — vs config.toml, what's the relationship?
8. `docker-compose.full.yml` vs `docker-compose.yml` — why two?
9. `justfile` vs `Makefile` — why two build systems?
10. `flake.nix` — is this actually used/maintained?

### Directories to investigate:
1. `backups/` (6.2 GB) — contains SQL dumps, sqlite files. Is anything in the codebase creating/reading these? Or just manual dumps?
2. `data/` — contains `locomo10.json` (2.7 MB). What uses it?
3. `viewer/` — what's its status? Is viewer-rewrite branch merged?
4. `hooks/` — what's in here?
5. `examples/` — current or stale?
6. `benches/` — current or stale? Do they compile?
7. `scripts/` — what scripts, are they referenced?
8. `docker/` — what's in here vs root Dockerfile?

### Worktrees:
1. `.worktrees/viewer-rewrite/` (3.5 GB) — branch is MERGED into main
2. `.worktrees/refactor-split-modules/` (5.6 GB) — 5 unmerged commits
3. `/Users/alexander/Projects/totalrecall-locomo-eval/` (2.3 GB) — detached HEAD on ancient commit

### Branches (check each):
Merged but not deleted: `viewer-rewrite`, `fix/skip-keyring-in-tests`, `feat/llm-judge-metrics`, `feature/llm-provider-abstraction`
Backup branches: `backup/pr-116-original-20251218-042720`, `backup/main_contam`, `backup/main_contaminated_20251217_092035`
Unmerged local: `feat/dream-rebuild-relationships`, `perf/parallelize-eval-reranking`, `feat/oauth-credential-provider`, `feature/sqlite-migration`
~20 stale remote-only branches on origin

### Tickets:
7 untracked `.tickets/` files, 3 modified

## Your Process

For EACH suspect item:
1. **Read the actual content** (first 50 lines for files, `ls -la` for dirs)
2. **Check git log** — `git log --oneline -5 -- <path>` — when added, by whom, context
3. **Check references** — `rg -l '<filename>' --glob '!target'` — is it used anywhere?
4. **Check size** — `du -sh <path>`
5. **Classify**: SAFE_DELETE / INVESTIGATE / KEEP / ARCHIVE_THEN_DELETE
6. **Provide evidence** for each classification

For branches:
1. Check if the branch's changes exist in main (cherry-picked, squash-merged, etc.)
2. Check last commit date
3. Check if there's an open PR

For worktrees:
1. Check if the branch is merged
2. Check for uncommitted changes in the worktree
3. Check target/ size within worktree

## Output

Create a comprehensive ticket with your findings using `todos_oneshot` tagged `research,oracle,maintenance`. Organize by:
1. **Immediate Safe Deletes** — with evidence
2. **Archive Then Delete** — valuable history but taking space
3. **Needs Human Decision** — with context for the decision
4. **Keep** — with justification
5. **Total disk recovery estimate**

Be THOROUGH. Read files. Check references. Don't guess by filename.


## Notes

**2026-02-16T10:29:35Z**

Starting comprehensive deep-dive audit of totalrecall-rs repo. Will investigate all suspect files, directories, worktrees, and branches systematically.

**2026-02-16T10:31:42Z**

Deep investigation complete. All suspect files, directories, worktrees, and branches audited. Now compiling findings into structured output ticket.

**2026-02-16T10:34:38Z**

DONE: Comprehensive deep-dive audit complete. Created findings ticket as-f69d with full evidence-backed classifications.nnKey findings:n- 5.8 GB IMMEDIATE safe deletes (2 stale worktrees, eval files, backup files, merged branches)n- 6.2 GB recoverable with human approval (backups/ dir marked 'NEVER DELETE')n- 5.8 GB recoverable by cleaning active refactor worktree target/n- Total potential: ~17.8 GB recoveryn- 42 stale remote branches to prunen- config.toml/template convention violation (identical files both tracked)n- justfile/Makefile duplication (identical targets)n- docker/ dir superseded by root docker-compose filesn- refactor/split-modules worktree is ACTIVE (touched today) — do not deletennAll items classified as SAFE_DELETE / ARCHIVE_THEN_DELETE / NEEDS_HUMAN_DECISION / KEEP with evidence. Cleanup commands provided.

**2026-02-16T10:34:48Z**

DONE: Task completed.
